#LIB=$.Clib.o.Stubs $.RISC_OSlib.o.RISC_OSlib # Use shared C library
LIB=C:o.Stubs RISC_OSlib:o.RISC_OSlib # Use shared C library

!RunImage:   Simulator.o Fetch.o EMuRead.o EmuOp.o Adressage.o CodeOp.o EmuWrite.o Sprite.o Splot.o
 link -o !RunImage Simulator.o Fetch.o EmuRead.o Adressage.o EmuOp.o CodeOp.o EmuWrite.o Sprite.o SPlot.o $(LIB)
 squeeze !RunImage

Simulator.o: Simulator.c general.h
 cc -c -zpnocheck_stack -IRISC_OSlib: Simulator.c

Fetch.o: Fetch.s FetchInc.s
 objasm -FROM s.Fetch -TO o.Fetch -S -Q -C

EmuRead.o: EmuRead.c general.h Externals.h
 cc -c -zpnocheck_stack -IRISC_OSlib: EmuRead.c

EmuOp.o:     EmuOp.c general.h Externals.h
 cc -c -zpnocheck_stack -IRISC_OSlib: EmuOp.c

EmuWrite.o:  EmuWrite.c general.h Externals.h
 cc -c -zpnocheck_stack -IRISC_OSlib: EmuWrite.c

Adressage.o: Adressage.s
 objasm -FROM s.Adressage -TO o.Adressage -S -Q -C

CodeOp.o:    CodeOp.s
 objasm -FROM s.CodeOp -TO o.CodeOp -S -Q -C

Sprite.o:    Sprite.c general.h
 cc -c -zpnocheck_stack -IRISC_OSlib: Sprite.c

SPlot.o:     SPlot.s
 objasm -FROM s.SPlot -TO o.SPlot -S -Q -C
